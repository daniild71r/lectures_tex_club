\setcounter{section}{16}

\section{Отношения на множествах. Свойства бинарных отношений. Отношения эквивалентности, теорема о классах эквивалентности}
\par Любое свойство можно отождествить с множеством всех объектов, которые им обладают. Например, свойство чётности соответсвует множеству чётных чисел.
\par \textbf{Свойством элементов} множества $A$ называется любое подмножество $A$ или, что тоже самое, любая функция из $A$ в $\{0,1\}$.
\par  \textbf{Бинарным отношением} на множестве $A$ называется любое подмножество $A^2 = A \times A$ или, что тоже самое, любая функция из $A^2$ в $\{0,1\}$. Обозначения: $(x,y) \in R \mbox{ или } R(x,y) = 1 \mbox{ или } xRy$.
\par \textbf{Предикатом валентности $k$} на множестве $A$ называется подмножество $A^k$ или, что тоже самое, функция из $A^k$ в $\{0,1\}$.
\subsection*{Классификация отношений:}
\begin{enumerate}
    \item рефлексивные $\forall x \; xRx \quad\color{ForestGreen}\mbox{ ( = \, $\leqslant$ \, $\svdots$ \, $\subset$ \, $\cong$ )} $ 
    \item антирефлексивные $\forall x \; \neg(xRx) \quad\color{ForestGreen}\mbox{ ( < )} $ 
    \item симметричные $\forall x,y \;\; xRy \to yRx \quad\color{ForestGreen}\mbox{ ( = \, $\cong$ \, $\bmod$ \, $\|$ )} $ 
    \item антисимметричные $\forall x,y \;\; (xRy \land yRx) \to (x=y) \quad\color{ForestGreen}\mbox{ ( < \, $\leqslant$ \, $\svdots$ \, $\subset$ )} $
    \item транзитивные $\forall x,y,z \;\; (xRy \land yRz) \to xRz \quad\color{ForestGreen}\mbox{ ( = \, < \, $\svdots$ \, $\subset$ \, $\cong$ )} $ 
    \item антитранзитивные $\forall x,y,z \;\; (xRy \land yRz) \to \neg(xRz) \quad\color{ForestGreen}\mbox{ ( $\bot$ на плоскости )} $ 
    \item евклидово (правое) $\forall x,y,z \;\; (xRy \land xRz) \to yRz \quad\color{ForestGreen}\mbox{ ( нетразитивное R = \{(1,2),(2,2),(2,3),(3,2),(3,3)\} )} $ 
\end{enumerate}    

\subsection*{Наборы свойств:}
\begin{itemize}
    \item отношение эквивалентности: \textit{рефлексив. + симметрич. + транзитив.}
    \item отношение нестрогого (частичного) порядка: \textit{рефлексив. + антисимметрич. + транзитив.}
    \item отношение строгого (частичного) порядка: \textit{антирефлексив. + антисимметрич. + транзитив.}
    \item отношение (нестрогого) предпорядка: \textit{рефлексив. + транзитив.}
\end{itemize}

\subsection*{Отношения эквивалентности}
Примеры: $= \, \bmod \, \sim $ (подобие тругольников) $\, \| $ (паралленльность или совпадение прямых) и тд


Общий пример: задана $F: A \to B$ \quad $x \sim y$, если $f(x) = f(y)$


Тогда: 
\begin{flushleft}
    \hspace{10mm}\fbox{=} $f: A \to A \quad f(x) = x$
    
    \hspace{10mm}\fbox{$\bmod k$} $f$ возвращает остаток при делении на $k$
    
    \hspace{10mm}\fbox{$\|$} $f$ возвращает направление (элемент проективной прямой)
    
    \hspace{10mm}\fbox{$\sim$} $f$ возвращает форму (3 угла, упорядоченных по неубыванию, в сумме дающие $180^{\circ}$)
\end{flushleft}

Пусть на множестве $A$ задано отношение $\sim$ \,, тогда \textbf{классом эквивалентности} элемента $x \in A$ называется множество $K_x = \{y \; | \; y\sim x\}$
\\ \par \textbf{Теорема. (Основная теорема об отношениях эквивалентности) } \par Если на множестве задано отношение эквивалентности, то все множество разбивается на классы эквивалентности (т.е. представляется в виде такого объединения непересекающихся подмножеств, что два элемента эквивалентны тогда и только тогда, когда лежат в одном и том же подмножестве).
\par Иначе говоря, если на множестве $A$ задано отношение эквивалентности, то $A = \cup_{i \in I}A_i$ таких, что 
\begin{enumerate}
    \item если $x \in A_i$, то $A_i = K_x$
    \item если $x \in A_i$ и $y \in A_i$, то $x \sim y$
    \item при $i \neq j$ если $x \in A_i$ и $y \in A_j$, то $\neg(x \sim y)$
\end{enumerate}
Искомая функция (отношение эквивалентности) отображает $x$ в $K_x$ и тем самым делит множество на классы эквивалентности.
\newline $\blacktriangleright$
Так как отношение эквивалентности состоит из рефлексивности, симметричности и транзитивности, то получаем
\begin{enumerate}
\setcounter{enumi}{-1}
    \item из рефлексивности ($\forall x \; xRx$) следует, что $x \in K_x$, т.е. каждый элемент лежит в своем классе эквивалентности
    \item если $y \in K_x$ и $z \in K_x$, то $y \sim z$ получаем следующими рассуждениями. Так как $y \in K_x \rightarrow y \sim x$, $z \in K_x \rightarrow z \sim x$, т.е. $x \sim z$. Тогда по транзитивности $y \sim z$
    \item если $z \in K_x$, $z \in K_y$, то $ K_x = K_y$ получем следующими рассуждениями. Так как $z \in K_x \rightarrow z \sim x$, т.е. $x \sim z$, $z \in K_y \rightarrow z \sim y$. Тогда по транзитивности $x \sim y$. \newlineПусть $t \sim K_x$. Тогда $t \sim x$, по транзитивности $t \sim y$. Таким образом, $K_x \subset K_y$ и $K_y \subset K_x$, следовательно $K_x=K_y$. По контрапозиции если $K_x \neq K_y$, то $K_x \cap K_y = $ \O.
    \item если $K_x \neq K_y$, $z \in K_x$, $t \in K_y$, то $\neg(z \sim t)$ так как, если бы $z \sim t$, то по транзитивности $z \sim y$, откуда $z \in K_x \cap K_y$, что противоречит предыдущему пункту. Следовательно, $\neg(z \sim t)$. $\blacksquare$
\end{enumerate}

\textbf{Задача:} Являются ли следующие отношения отношениями эквивалентности? Если да, то укажите, на какие классы разбиваются соответсвующие множества.
\begin{enumerate}
    \item[(a)] $|x-y| \, \svdots \, k$, \, $x,y \in \mathbb{Z}, k \in \mathbb{N}, k > 0$
    \begin{itemize}
        \item[$\blacktriangle$] $\forall x \;|x-x| \, \svdots \, k$ {\color{ForestGreen}OK}; \quad $\forall x,y \;|x-y| \, \svdots \, k \;\; |y-x| \, \svdots \, k$ {\color{ForestGreen}OK}; \quad $\forall x,y,z \;|x-y| \, \svdots \, k \;\; |y-z| \, \svdots \, k$ имеют одинаковый остаток {\color{ForestGreen}OK}. Следовательно, классы эквивалентности по остаткам. $\blacksquare$
    \end{itemize}
    
    \item[(б)] $\{ ((x_1, y_1), (x_2,y_2)) \;\; | \;\; x_1-x_2 = y_1-y_2 \}$ на плоскости
    \begin{itemize}
        \item[$\blacktriangle$] Две точки на плоскости, удовлетворяющие заданному отношению, определяют прямую параллельную $y=x$. $\forall (x_1, y_1) \;0 = 0$ {\color{ForestGreen}OK}; \quad $\forall (x_1, y_1), (x_2,y_2) \; D_1 = D_2 \;$ и $\; -D_1=-D_2$ {\color{ForestGreen}OK}; \quad $\forall (x_1, y_1), (x_2,y_2), (x_3,y_3) \newline D_1=D_2 \;\; D_2=D_3$ и $D_1=D_3$ {\color{ForestGreen}OK}. Значит, классы эквивалентности прямых вида $y = x + b$. $\blacksquare$
    \end{itemize}
    
    \item[(в)] $|x-y| \, < \, 1$, \, $x \in \mathbb{R}$
    \begin{itemize}
        \item[$\blacktriangle$] $0 \, R \, \frac{2}{3}$ и $\frac{2}{3} \, R \, \frac{4}{3}$, но $0 \, R \, \frac{4}{3} \,$ {\color{Red}WA}. Следовательно, не является отношением эквивалентности. $\blacksquare$
    \end{itemize}
    
    \item[(г)] $\{ (AB, CD) \;\; | \;\; ABCD \, - $ параллелограмм, возможно вырожденный$\}$  на множестве направленных отрезков, возможно вырожденных, на плоскости
    \begin{itemize}
        \item[$\blacktriangle$] Рефлексивность очевидно выполнена {\color{ForestGreen}OK}; симметричность тоже {\color{ForestGreen}OK}; транзитивность для векторов тоже верна, так как возможны вырожденные случаи {\color{ForestGreen}OK}. Следовательно, классы эквивалентности параллелограммов. $\blacksquare$
    \end{itemize}

    \item[(д)] $x\|y$; $x\|y$ или $x=y$ на множестве всех прямых на плоскости
    \begin{itemize}
        \item[$\blacktriangle$] Если считать, что параллельные прямые - это прямые не имеющие общих точек, то рефлексивность не выполняется {\color{Red}WA}. Следовательно, первое не является отношением эквивалентности.
        \newline Во-втором случае рефлексивность уже выполнена {\color{ForestGreen}OK}; симметричность тоже {\color{ForestGreen}OK}; транзитивность для параллельности с совпадением тоже верна {\color{ForestGreen}OK}. Следовательно, классы эквивалентности направления. $\blacksquare$
    \end{itemize}
    
    \item[(е)] $x$ гомотетичен $y$; $x$ подобен $y$ на множестве всех треугольников на плоскости
    \begin{itemize}
        \item[$\blacktriangle$] Для гомотетии транзитивность неверна. В качестве примера можно рассмотреть треугольники X, Y, Z, где X = Z (со сдвигом в плоскости), а X и Y, Y и Z соответсвенно гомотетичны. Тогда транзитивности нет. {\color{Red}WA}. Следовательно, первое не является отношением эквивалентности.
        \newline Во-втором случае рефлексивность выполнена, так как треугольник подобен сам себе {\color{ForestGreen}OK}; симметричность тоже {\color{ForestGreen}OK}; транзитивность тоже выполнена по равенству углов треугольников (3 признак подобия) {\color{ForestGreen}OK}. Следовательно, классы эквивалентности наборов величин углов треугольника. $\blacksquare$
    \end{itemize}
    
    \item[(ж)] из $x$ существует путь в $y$ на множестве всех вершин некоторого графа.
    \begin{itemize}
        \item[$\blacktriangle$] Рефлексивность выполнена, так как существует нулевой путь из вершины в саму себя {\color{ForestGreen}OK}; симметричность тоже выполнена, так как граф не ориентирован {\color{ForestGreen}OK}; транзитивность тоже выполнена, так как можно произвести неформальное сложение путей {\color{ForestGreen}OK}. Следовательно, классы эквивалентности компоненты связности. $\blacksquare$
    \end{itemize}
    
    \item[(з)] последовательность $a_n - b_n$ бесконечно мала на множестве всех последовательностей рациональных чисел.
    \begin{itemize}
        \item[$\blacktriangle$] Рефлексивность выполнена, так как $\lim_{x\to\infty} (a_n-a_n) = 0$ {\color{ForestGreen}OK}; симметричность тоже выполнена, так как граф $\lim_{x\to\infty} (a_n-b_n) = \lim_{x\to\infty} (b_n-a_n) =0$ {\color{ForestGreen}OK}; транзитивность тоже выполнена, так как $\lim_{x\to\infty} (a_n-c_n) = \lim_{x\to\infty} (a_n-b_n+b_n-c_n) =0$ {\color{ForestGreen}OK}. Следовательно, классы эквивалентности действительных чисел, к которым стремятся последовательности. $\blacksquare$
    \end{itemize}
    
    \item[(з)] $f$ и $g$ равны в нуле; $f$ и $g$ равны в некоторой точке на множестве функций из $\mathbb{R}$ в $\mathbb{R}$
    \begin{itemize}
        \item[$\blacktriangle$] В первом случае рефлексивность очевидно выполнена {\color{ForestGreen}OK}; симметричность тоже {\color{ForestGreen}OK}; транзитивность тоже выполнена так как если $f(0)=g(0)=c$ и $g(0)=h(0)=d$, то $c=g(0)=d$ {\color{ForestGreen}OK}. Следовательно, классы эквивалентности по значению в нуле. 
        \newline Во-втором случае транзитивность не выполнена, так как одна функция может совпадать с другой в точке $a$, которая совпадает с третьей в точке $b$, но при этом не факт, что первая и третья функции совпадают в какой-либо точке {\color{Red}WA}. Следовательно, не является отношением эквивалентности. $\blacksquare$
    \end{itemize}
\end{enumerate}
\par \textbf{Задача:} Докажите, что ни одно требование в определении отношения эквивалентности не является лишним: например, существует симметричное, транзитивное, но не рефлексивное отношение.
\par $\blacktriangle$ Возьмем социальное отношение «быть знакомым с ...», или в более чёткой форме отношение «когда-либо встретиться с ...». Тогда рефлексивность выполнена, так как всякий человек встречался с собой {\color{ForestGreen}OK}; симметричность тоже выполнена, так как если один человек встретился с другим, то второй встретился с первым {\color{ForestGreen}OK}; но транзитивность не выполнена, так как  если один человек встретился с другим, который встретился с третьим, то не факт, что первый и третий встречались {\color{Red}WA}. Следовательно, существует симметричное, транзитивное, но не рефлексивное отношение. $\blacksquare$

\section{Отношения частичного и линейного порядка. Примеры отношений. Любое счётное упорядоченное множество можно доупорядочить линейно }
\par Как было указано ранее, отношение называется \textbf{отношением частичного порядка}, если оно рефлексивно, антисимметрично и транзитивно. При этом антисимметричность:  $\forall x,y \;\; (xRy \land yRx) \to (x=y)$
\\ \par \textbf{(Частично) упорядоченным множеством} (сокращенно ч.у.м.) называется пара $\langle A,\leq_A \rangle$ — множество и частичный порядок (отношение порядка) на нем.
\par Частичный порядок называется \textbf{линейным порядоком}, если любые два различных элемента множества сравнимы. (Диаграмма Хассе вырождается в цепочку, т.е. линию). Если порядок линеен, множество называется \textbf{линейно упорядоченным}.
\par Отношение называется \textbf{отношением строгого порядка}, если оно транзитивно и антирефлексивно.
\\ \par \textbf{Задача:} Проверьте, что следующие множества являются упорядоченными. Какие из них упорядочены линейно?
\begin{enumerate}
    \item[(a)] $\langle A, = \rangle$, $\langle 2^A, \subset \rangle$ где $A$ - произвольное множество.
    \begin{itemize}
        \item[$\blacktriangle$] $A=A$ {\color{ForestGreen}OK}; \quad $x=y$ {\color{ForestGreen}OK}; \quad $\big((x=y) \land (y=z)\big) \to (x=z)$ {\color{ForestGreen}OK}; \quad Очевидно, порядок не линеен. {\color{Red}WA}
        \newline Во-втором случае $2^A \subset 2^A$ {\color{ForestGreen}OK}; \quad $\big((x \subset y) \land (y \subset x)\big) \to (x = y)$ {\color{ForestGreen}OK}; \quad $x \subset y \subset z \to x \subset z$ {\color{ForestGreen}OK}; 
        \newline Если $A=\{0,1\}$, то \{0\} и \{1\} не сравнимы, следовательно, порядок не линеен. {\color{Red}WA} $\blacksquare$
    \end{itemize}
    
    \item[(б)] $\langle A, \leq \rangle$, $\langle A, \geq \rangle$ где $A$ - одно из множеств $\mathbb{N,Z,Q,R}$.
    \begin{itemize}
        \item[$\blacktriangle$] $x \leq x$ {\color{ForestGreen}OK}; \quad $\big((x \leq y) \land (y \leq x)\big) \to (x = y)$ {\color{ForestGreen}OK}; \quad $\big((x \leq y) \land (y \leq z)\big) \to (x \leq z)$ {\color{ForestGreen}OK}.
        \newline Аналогично с $\geq$. По очевидным причинам в обоих случаях это линейный порядок. {\color{ForestGreen}OK}  $\blacksquare$
    \end{itemize}
    
    \item[(в)] $\langle \mathbb{N}, \svdots \rangle$
    \begin{itemize}
        \item[$\blacktriangle$] $x \svdots x$ {\color{ForestGreen}OK}; \quad $\big((x \svdots y) \land (y \svdots x)\big) \to (x = y)$ {\color{ForestGreen}OK}; \quad $\big((x \svdots y) \land (y \svdots z)\big) \to (x \svdots z)$ {\color{ForestGreen}OK}.
        \newline Элементы 2 и 3 не сравнимы, следовательно, порядок не линеен. {\color{Red}WA} $\blacksquare$
    \end{itemize}
    
    \item[(г)] $\langle \mathbb{R}^2, \leq_{lex} \rangle$ где $(x_1,y_1) \leq_{lex}(x_2,y_2)$, если либо $x_1 < x_2$, либо $x_1 = x_2$ и $y_1 \leq y_2$
    \begin{itemize}
        \item[$\blacktriangle$] $(x,y)  \leq_{lex}(x,y)$ {\color{ForestGreen}OK}; \quad $\Big(\big((x_1,y_1) \leq_{lex}(x_2,y_2)\big) \land \big((x_2,y_2) \leq_{lex}(x_1,y_1)\big)\Big) \to \big((x_1=x_2) \land (y_1=y_2)\big)$ {\color{ForestGreen}OK}; \quad $\Big(\big((x_1,y_1) \leq_{lex}(x_2,y_2)\big) \land \big((x_2,y_2) \leq_{lex}(x_3,y_3)\big)\Big) \to \big((x_1,y_1) \leq_{lex}(x_3,y_3)\big)$ {\color{ForestGreen}OK}.
        \newline По очевидным причинам это линейный порядок. {\color{ForestGreen}OK}  $\blacksquare$
    \end{itemize}
    
    \item[(д)] $\langle \mathbb{R}^2, \leq \rangle$ где $(x_1,y_1) \leq (x_2,y_2)$, если $x_1 \leq x_2$ и $y_1 \leq y_2$
    \begin{itemize}
        \item[$\blacktriangle$] $(x,y) \leq(x,y)$ {\color{ForestGreen}OK}; \quad $\Big(\big((x_1,y_1) \leq(x_2,y_2)\big) \land \big((x_2,y_2) \leq(x_1,y_1)\big)\Big) \to \big((x_1=x_2) \land (y_1=y_2)\big)$ {\color{ForestGreen}OK}; \quad $\Big(\big((x_1,y_1) \leq(x_2,y_2)\big) \land \big((x_2,y_2) \leq(x_3,y_3)\big)\Big) \to \big((x_1,y_1) \leq(x_3,y_3)\big)$ {\color{ForestGreen}OK}.
        \newline Элементы $(2,3)$ и  $(3,1)$ не сравнимы, следовательно, порядок не линеен. {\color{Red}WA} $\blacksquare$
    \end{itemize}
\end{enumerate}
\par \textbf{Задача:} Докажите, что любое счётное упорядоченное множество можно доупорядочить линейно. (Т.е. для любого отношения порядка $R$ существует отношение линейного порядка $S$, такое что $R \subset S$.)
\par $\blacktriangle$ Занумеруем все пары, которые еще не упорядочены. Далее, рассмотрим первую пару таких $a$ и $b$, что $(a,b),(b,a) \notin R$. Построим новое отношение $R^\prime \; | \; R \subset R^\prime$, в котором положим $cR^\prime d$ для всех таких $c$ и $d$, что $(c,a),(b,d) \in R$. Проверим, что $R^\prime$ является отношением порядка.
\newline Рефлексивность выполнена, так как $R$ рефлексивно. Рассмотрим антисимметричность $(c,d),(d,c)$:
\begin{enumerate}
    \item если оба этих отношения из $R$, тогда $c=d$;
    \item если одно из $R$, а другое из $R^\prime$, тогда имеем $cRa$, $bRd$ и $dRc$, откуда по транзитивности $R$ выполнено $bRa$, т.е. эти элементы сравнимы в $R$ - противоречие;
    \item если оба этих соотношения из $R^\prime$, то имеем $cRa$, $bRd$, $bRc$ и $dRa$, и снова по транзитивности $aRb$ и $bRa$.
\end{enumerate}
Транзитивность $R^\prime$ проверяется аналогично.
\par Таким образом, $R^\prime$ - частичный порядок. Тогда выкинем из нашей нумирации все добавленные пары и рассмотрим следующую по номеру пару, которая не упорядочена. Продолжая этот процесс, мы получим линейный порядок $S$, содержащий данный. $\blacksquare$